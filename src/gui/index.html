<!DOCTYPE html>
<html>
	<head>
		<title>Chat stats</title>
		<meta charset="UTF-8" />
		<link rel="stylesheet" href="style/style.css" />
		
		<script src="generated/data.js" type="text/javascript"></script>

		<script src="js/moment.js" type="text/javascript"></script>
		<script src="js/Chart.js" type="text/javascript"></script>
		<script src="js/logic.js" type="text/javascript"></script>
		
		<script language="javascript">
			Chart.defaults.global.responsive = false;
			Chart.defaults.global.defaultFontFamily = '"Roboto","Helvetica Neue","Helvetica",Helvetica,Arial,sans-serif;';
		</script>
	</head>
	<body>
		<div id="content" class="center">
			<center>
				<h1 id="chatName"></h1>
			</center>
			<h2>Overview</h2>
			<h3>Participants</h3>
			
			<p>
				<div id="participants"></div>
			</p>
			
			<p>
				<strong>Total number of messages: </strong><span id="totalNumMsgs"></span>
			</p>
			
			<h3>Messages per user:</h3>
			<canvas id="msgsPerUserChart" width="400" height="400"></canvas>
			
			<h3>Messages over time:</h3>
			<canvas id="totalMsgsOverTimeChart" width="400" height="400"></canvas>			

			<h3>Messages per month:</h3>
			<canvas id="totalMsgsPerMonthChart" width="400" height="400"></canvas>

			<h3>Messages per weekday:</h3>
			<canvas id="totalMsgsPerWeekDayChart" width="400" height="400"></canvas>

			<h3>Messages throughout the day:</h3>
			<canvas id="totalMsgsPerTimeChart" width="400" height="400"></canvas>

			<h3>Most common words:</h3>
			<ul id="mostCommonWords">
			</ul>
			<canvas id="wordCloud" width="400" height="400"></canvas>

			<div id="participantDiv">
			</div>
		</div>
		
		<script>
			setChatName();
			setParticipants();
			setTotalNumberOfMsgs();
			setMessagesPerUser();
			setTotalMsgsOverTime();
			setTotalMsgsPerMonth();
			setTotalMsgsPerWeekday();
			setTotalMsgsPerTime();
			setTotalMostCommonWords();
			setTotalWordCloud();
			
			backend.getUsers().forEach(participant => {
				initParticipant(participant);
			});

			backend.getUsers().forEach(participant => {
				setNumberOfMsgs(participant);
				setMsgsOverTime(participant);
				setMsgsPerMonth(participant);
				setMsgsPerWeekday(participant);
				setMsgsPerTime(participant);
				setMostCommonWords(participant);
				setWordCloud(participant);
			});
		</script>
	</body>
</html>